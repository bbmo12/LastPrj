<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.last.prj.board.service.BoardMapper">


	<select id="boardSelect"
		parameterType="com.last.prj.board.service.BoardVO"
		resultType="com.last.prj.board.service.BoardVO">
		SELECT * FROM BOARD WHERE B_NO = #{b_no}
	</select>

	<select id="boardSelectList" resultType="com.last.prj.board.service.BoardVO">
		SELECT * FROM BOARD ORDER BY B_NO ASC
	</select>

	<update id="boardUpdate"
		parameterType="com.last.prj.board.service.BoardVO">
		UPDATE BOARD
		<set>
			<if test="title != null">TITLE = #{title}, </if>
			<if test="content != null"> CONTENT = #{content},</if>
			<if test="writer != null"> WRITER = #{writer}, </if>
			<if test="w_date != null">W_DATE = #{w_date},</if>
		</set>
		WHERE B_NO = #{b_no}

	</update>

	<insert id="boardInsert"
		parameterType="int">
		<selectKey keyProperty="p_no"
			resultType="com.last.prj.board.service.BoardVO" order="BEFORE">
			SELECT
			NVL(MAX(B_NO) + 1, 1 ) AS B_NO FROM BOARD
		</selectKey>
		INSERT INTO BOARD(B_NO,TITLE,CONTENT,WRITER,W_DATE)
		values(#{b_no},
		#{title}, #{content}, #{writer}, #{w_date})
	</insert>

	<delete id="boardDelete"
		parameterType="int">
		DELETE FROM BOARD WHERE B_NO = #{b_no}
	</delete>


	<update id="boardIdUpdate"
		parameterType="int">
	<![CDATA[
		UPDATE BAORD SET B_NO = B_NO - 1 
		WHERE B_NO = #{b_no}
		]]>
	</update>

</mapper>