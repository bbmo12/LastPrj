<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.last.prj.reserv.service.ReservationMapper">
	<!-- 일반 예약조회 -->
	<select id="reservationSelect" 
	 resultType="com.last.prj.reserv.service.ReservationVO" 
	 parameterType="com.last.prj.reserv.service.ReservationVO">
		SELECT R.R_NO ,PM.NAME,R.R_DATE ,S.STARTDATE,R.TIME AS TIME,R.CONTENT AS RCONTENT ,C.CONTENT AS RCCONTENT,FC.CONTENT AS PCONTENT, R.REFUSE
		FROM  P_MEMBER PM, SERVICE S, RESERVATION R, PET P, F_CODE C, F_CODE FC
		WHERE PM.P_ID = R.P_ID AND S.R_NO=R.R_NO AND P.PET_NO = R.PET_NO AND C.CODE = R.CODE AND P.CODE = FC.CODE
		ORDER BY R.R_NO
	</select>
	<select id="reservationSelectList" resultType="com.last.prj.reserv.service.ReservationVO">
		SELECT * FROM RESERVATION
	</select>
	
	<update id="okUpdate" parameterType="int">
		UPDATE 	RESERVATION 
		SET 	CODE = 402
		WHERE 	R_NO = #{rno}
	 </update>
	 
	 <update id="noUpdate" >
		UPDATE 	RESERVATION 
		SET 	REFUSE = #{refuse},
				CODE   = 403
		WHERE 	R_NO   = #{rno}
	 </update>
	 
	 <update id="payUpdate" parameterType="int">
		UPDATE 	RESERVATION 
		SET 	CODE = 404
		WHERE 	R_NO = #{rno}
	 </update>

</mapper>