<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.last.prj.reserv.service.ReservCountMapper">

<select id="reservCountList" resultType="com.last.prj.reserv.service.ReservCountVO">
	SELECT * FROM RESERVCOUNT
</select>

<!-- 예약중복체크 (p_id 추가로 받아야됨) -->
<select id="reservCountSelect" resultType="com.last.prj.reserv.service.ReservCountVO" parameterType="String">
	SELECT * FROM RESERVCOUNT
	WHERE RESERV_DATE = #{reserv_date}
	AND   RESERV_TIME = #{reserv_time}
</select>
<!-- 예약등록체크할 값 등록 -->
<insert id="reservCountInsert" parameterType="com.last.prj.reserv.service.ReservCountVO">
	<selectKey keyProperty="reserv_count" resultType="int" order="BEFORE">
		 SELECT NVL(MAX(RESERV_COUNT) +1 , 1) AS RESERV_COUNT FROM RESERVCOUNT
	</selectKey>
	INSERT INTO RESERVCOUNT
	VALUES (#{reserv_count},#{reserv_date},#{reserv_time},#{p_id})
</insert>
</mapper>