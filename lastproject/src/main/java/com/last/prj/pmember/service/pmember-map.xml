<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.last.prj.pmember.service.PmemberMapper">

	<resultMap type="com.last.prj.pmember.service.PmemberVO"
		id="PmemberVO">
		<result property="name" column="name" />
		<result property="p_profile" column="p_profile" />
		<result property="code" column="code" />
		<result property="p_id" column="p_id" />
	
		<association property="FfileVO"
			javaType="com.last.prj.pmember.service.FfileVO">
			<id property="f_part" column="f_part" />
			<result property="picture" column="picture" />
			<result property="w_write" column="w_write" />
		</association>

	</resultMap>
	<!-- 전체리스트 -->
	<select id="memberList"
		parameterType="com.last.prj.pmember.service.PmemberVO"
		resultMap="PmemberVO">
		SELECT *
		FROM P_MEMBER P, F_FILE F
		WHERE F.W_WRITE = P.P_ID AND F.F_PART = P.P_PROFILE AND P.CODE = #{code}
	</select>


	<resultMap type="com.last.prj.pmember.service.PmemberVO"
		id="PmemVO">
		<result property="name" column="name" />
		<result property="p_profile" column="p_profile" />
		<result property="w_address" column="w_address" />

		<association property="FfileVO"
			javaType="com.last.prj.pmember.service.FfileVO">
			<id property="f_part" column="f_part" />
			<result property="picture" column="picture" />
		</association>
	</resultMap>
	<!-- 지역검색 -->
	<select id="memberSelect"
		parameterType="com.last.prj.pmember.service.PmemberVO"
		resultMap="PmemVO">
		SELECT P.NAME,F.PICTURE
		FROM P_MEMBER P, F_FILE F
		WHERE
		P.P_PROFILE = F.F_PART AND W_ADDRESS LIKE '%'||#{val}||'%'
	</select>

</mapper>